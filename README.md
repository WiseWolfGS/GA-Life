# GA-Life

Cellular Automata for Visualization of Genetic Algorithms (Conway-aligned)

---

1. ## 프로젝트의 개요

   1. #### 이름 및 슬로건

   - 이름
      “GA-Life - Visualization of Genetic Algorithms”
   <br>

   - 슬로건
      “Cellular Automata for Visualization of Genetic Algorithms (Conway-aligned)”  
   <br>

   2. #### 개발 목적 및 규칙 설명

   - 개발 목적
      유전 알고리즘은 실제 생물의 진화를 모방해서 문제를 해결하는 최적화 기법의 일종이다. 유전 알고리즘은 CNN 등 인공 신경망이 인공지능의 대세가 된 지금도 인공 신경망의 초기화에 쓰이는 등 다양한 활용성을 지니고 있다. 하지만 서적 등의 예제에서 유전 알고리즘을 시각적으로 설명하는 잘 보이지 않는데, GA-Life는 세포 자동자의 각 세포에 유전 알고리즘을 적용하여 공간적으로 세포들이 진화하는 모습을 보여줌으로써 유전 알고리즘의 시각화가 가능하다고 사료된다. 또한 더 나아가 간략한 진화 시뮬레이션 모델로의 확장도 가능하다.    
   <br>
  
   - 기본 원칙
      보드는 2D 직사각형 격자로 채워져 있으며, 경계는 토러스 경계로 한다. 칸은 크게 세포가 살아있는 칸과 죽어있는 칸으로 구분 가능하며 이 칸이 한 번 동기 업데이트 되는 걸 한 세대가 지나갔다고 표현한다. 모든 살아있는 세포는 본인 주변 8개의 칸에 영향력을 끼치는데, 이 영향력에 따라 다음 세대에서 칸이 세포가 살아있는 칸이 될지 죽어있는 칸이 될지의 여부가 결정된다. 영향력은 소수점 둘째 자리에서 반올림한다.

      칸에 미치는 영향력이 너무 많은 경우도, 너무 적은 경우도 생존/탄생에 불리하게 설계를 하는 것이 GA-Life의 목적 중 하나이며, 그렇기에 기본적으로 유전자간 우위는 존재하지 않는다. 다만 칸의 지형 및 환경은 위치 별로 다르게 생존에 유리한 유전자가 생기도록 만들 수 있는 요소이다.
   <br>

   - 유전자와 영향력
      모든 세포는 유전자를 가지고 있으며, 살아있는 세포가 주변 8칸에 미치는 영향력의 크기는 그 세포가 탄생할 때 정해지는 유전자에 따라 달라진다. 각각의 세포는 유전자 [U,D,L,R] ∈ {2,4,6,8,10}을 가지고 있으며, 각각의 값은 상/하/좌/우에 해당 값만큼의 영향력을 준다는 것을 의미한다. 여기서 대각선은 (관련된 두 값 평균 - 1)로 계산 가능한데, 예를들어 [10, 4, 6, 8]의 유전자를 가진 세포는 왼쪽 위의 칸에 7만큼의 영향력을 행사한다. 예시를 전부 나타내면 다음과 같다.
      <br>

      <예시 - 영향력>
      ```
      [[7, 10, 8],
      [6, X, 8],
      [4, 4, 5]]
      ```
      <br>

      이런 규칙을 따르는 만큼 주변 살아있는 세포가 주는 영향력의 총합인 S_total은 지형 등 다른 보정 없이는 최대 76이다.


---

2. ## 생존/죽음 및 탄생/미탄생 판정

   1. #### 기본 규칙

   - 생존/사망 및 탄생/미탄생의 정의

      생존은 현 세대의 세포가 살아있는 칸이 다음 세대에도 세포가 살아있는 칸으로 유지되는 경우를 의미한다. 반대로 사망은 현 세대의 세포가 살아있는 칸이 다음 세대에는 세포가 죽어있는 칸으로 변하는 경우를 의미한다.

      탄생은 현 세대의 세포가 죽어있는 칸이 다음 세대에는 세포가 살아있는 칸으로 변하는 경우를 의미한다. 반면 미탄생은 현 세대의 세포가 죽어있는 칸이 다음 세대에도 세포가 죽어있는 칸으로 유지되는 경우를 의미한다.

      처음 세포가 살아있는 칸과 세포가 죽어있는 칸, 지형 및 환경, 세포가 살아있는 칸의 유전자는 커스텀 생성을 하지 않는 이상 유전 알고리즘 문단에 있는 초기화 규칙에 따라 초기 세포가 살아있는 칸의 밀도 ρ \= 0.25로 생성된다.
   <br>

   - 연속 확률 모델
      먼저 로지스틱 함수를 정의하면 다음과 같이 나온다: σ(x)=1/(1+e^(-x)). 다음 세대로 넘어갈 때 세포들의 생존/사망 및 탄생/미탄생 기준은 해당 칸이 받는 영향력(S)의 총합(S_total)에 따라 연속적인 확률로 판정된다. 자세한 수식은 다음과 같다.


      <수식 - p_live: 생존 확률, p_dead: 사망 확률, p_born: 탄생 확률, p_unborn: 미탄생 확률>

      ```math
      \begin{aligned}
      &p\_live(S\_total) = clip(α * {σ(β * (S\_total - μ))} * {1 - σ(β * (S\_total - μ))}^γ + δ, 0, 1)\\
      &p\_dead(S\_total) = 1 - p\_live(S\_total)\\

      &p\_born(S\_total) = clip(α * {σ(β * (S\_total - ν))} * {1 - σ(β * (S\_total - ν))}^γ + δ, 0, 1)\\

      &p\_unborn(S\_total) = 1 - p\_born(S\_total)\\
      \end{aligned}
      ```
   <br>

   - 위 수식에서의 기본값
      ```math
      α = 4\\
      β = -0.3\\
      γ = 1\\
      μ = 27.0\\
      ν = 34.5\\
      δ = -0.01
      ```
   <br>

   - 연속 확률 모델의 예외 사항
      만약 p_live(S_total)과 p_born(S_total)이 ε(기본 값은 0.003)보다 작을 경우 무조건 0으로 계산한다.

      탄생은 무조건 주변 8칸에 1개 이상의 세포가 살아있는 칸이 존재해야한다. 여기서 환경 중 하나인 항상 생존 환경도 탄생에 기여할 수 있다.

  2. #### 지형 및 환경

   - 기본 설명
      지형과 환경은 모두 칸에 종속된다. 지형은 성질이나 칸이 변하지 않으나, 환경은 주기적으로 조건에 따라 성질이나 칸이 변할 수 있다.


   - 지형  
      1. 높낮이 지형 (넣을지 여부 고민 중)

         높낮이 지형은 -1\~1의 값을 가진다. 임의의 칸에서 영향력을 전파할 때, 주변 칸의 지형값의 차이에 따라 기준이 되는 영향력에 특정 값이 곱해진다. 차이는 (임의의 칸 - 주변 칸)이며, -2이면 1/2, -1이면 3/4, 0이면 1, 1이면 4/3, 2이면 2가 곱해진다. 아래는 [10, 4, 6, 8]의 유전자를 가진 세포가 지형에 따라 어떻게 영향력을 전파하는지 표시한 것이다.   
         \
         <예시 - 지형>
         ```
         [[0, 1, 1],
         [-1, 0, 0],
         [0, -1, -1]]
         ```
         \
         <예시 - 영향력>
         ```
         [[7, 7.5, 6],
         [8, X, 8],
         [4, 5.3, 6.7]]
         ```
      2. 영향력 2배 지형
         주변 칸에 기존보다 2배의 영향력을 전파한다. 영향력 1/2배 지형과 중첩될 수 없다. (높낮이 지형에서는 무조건 0의 값을 지닌다.)
         \
         <예시 - 영향력>
         ```
         [[14, 20, 16],
         [12, X, 16],
         [8, 8, 10]]
         ```

      3. 영향력 1/2배 지형
         주변 칸에 기존보다 2배의 영향력을 전파한다. 영향력 2배 지형과 중첩될 수 없다. (높낮이 지형에서는 무조건 0의 값을 지닌다.)
         \
         <예시 - 영향력>
         ```
         [[3.5, 5, 4],
         [3, X, 4],
         [2, 2, 2.5]]
         ```

   - 환경  
      1. 항상 생존 환경
         이 환경이 존재하는 칸은 항상 세포가 살아있는 칸으로 판정된다. 유전자는 고정 [6, 6, 6, 6]이나 부모 후보에서는 제외된다.
      2. 항상 사망 환경
         이 환경이 존재하는 칸은 항상 세포가 죽어있는 칸으로 판정된다. 부모 후보에서는 제외된다.
      3. 강제 변이 환경
         이 환경이 존재하는 칸은 탄생 시 변이확률이 1.0, 즉 무조건 변이가 일어나게 된다.
      4. 추가 자원 환경
         이 환경이 존재하는 칸은 생존 및 탄생 확률 수식에서 δ 값을 0.1만큼 올린다.
      5. 노이즈 환경
         이 환경이 존재하는 칸은 생존 및 탄생 확률 수식에서 δ 값을 -0.05\~0.05만큼 변화시킨다.

---

3. ## 유전 알고리즘

   1. #### 초기화 (상호 배타적)

   - 정규분포 기반 확률 초기화 (기본적)
      평균 6, σ≈2 정규 기반 이산화. 즉, 6: 38.29%, 4/8: 24.17%, 2/10: 6.685%의 확률로 유전자가 나타남.
   <br>

   - 동일 확률 초기화
      모든 유전자가 나타날 확률이 동일함.
   <br>

   - 극단 확률 강화 초기화
      (2,10)을 두껍게, (4,6,8)을 얇게. 예를들어 2/10: 30%, 4/6/8: 13.3%.
   <br>

   - 모두 [6, 6, 6, 6] 초기화
      모든 세포의 유전자를 [6, 6, 6, 6]으로 만듦.

   2. #### 부모 선택

   - 후보 선정
      주변 8칸의 세포가 살아있는 칸들이 후보. 만약 주변에 세포가 살아있는 칸이 1칸일 경우에는 유전자가 그대로 복제되며 변이 단계로 바로 건너뛴다. 그리고 항상 생존 환경만 있는 경우에는 초기화 규칙에 따라 유전자가 생성되며 변이 단계로 바로 건너뛴다.
   <br>

   - 적합도 및 가중치 계산 (스냅샷 기반)
      각 후보의 적합도를 계산해 선택할 부모를 구한다. 이때 생존 확률이 높은 세포가 살아있는 칸일수록 더욱 적합도가 높아진다. 이후 적합도를 기반으로 가중치를 계산해 각각의 후보가 부모가 될 확률을 정한다.
   <br>

   - 최종 선택
      위에서 계산한 확률을 가지고 최종적으로 부모를 선택한다.


   3. #### 교차 (상호 배타적)

   - 부모 동일 확률 50/50 (기본적)
      유전자 좌위별로 양 부모에게서 유전자를 받아온다. 다른 가중치가 없는 각각 50%의 확률이다.
   <br>

   - 24칸 다수결
      유전자 좌위별로 양 부모에게서 유전자를 받아온다. 주변 24칸에 많은 유전자일수록 받아올 확률이 커진다.

   4. #### 변이 (상호 배타적)

   - 전체 변이
      변이가 일어날 시, 무조건 모든 유전자를 {2, 4, 6, 8, 10} 중 균등 치환한다. 변이가 일어날 확률, p_mut의 기본값은 0.02로 한다.  
   <br>

   - 부분 변이 (기본적)
      변이가 일어날 확률을 각각의 유전자 좌위에 따로 적용한 뒤 변이가 일어난 유전자를 {2, 4, 6, 8, 10} 중 균등 치환한다. 변이가 일어날 확률, p_mut의 기본값은 0.02로 한다.


   5. #### 한 틱 파이프라인
   - 이웃 영향 합산  
   - 환경 보정  
   - 판정  
   - 탄생 확정 칸 수행  
   - 동기 커밋

4. ## UI/UX

   1. #### 기본 화면 구성
   - 메인 실행 화면
   - 파라미터/지형 에디터

   2. #### 볼 수 있는 레이아웃
   - 유전자 맵
   - 지형 & 환경 맵
   - 확률 맵

   3. #### 통계
   - 세포가 살아있는 칸의 밀도
   - 탄생/사망 이벤트 수
   - 세포의 평균 수명

---

5. ## 기타

   1. #### 시드 고정

   2. #### 파라미터 개별 설정

   3. #### 재현성을 위한 시드+파라미터 JSON 저장/불러오기

---  

6. ##  마무리

   1. #### 기대하는 점
   - 탐색 & 착취 & 니치 설계

   2. #### 추가하면 좋을 점
   - β 대신 “원하는 반치폭(FWHM)”을 입력하면 내부적으로 β를 역산


